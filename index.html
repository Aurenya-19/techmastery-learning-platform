<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TechMastery - Real Learning Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,sans-serif;background:url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1920&q=80') center/cover fixed;color:#fff}body::before{content:'';position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(3px);z-index:-1}.app{display:flex;min-height:100vh}.sidebar{width:280px;background:rgba(17,24,39,.95);backdrop-filter:blur(10px);border-right:1px solid rgba(255,255,255,.1);padding:2rem 0;position:fixed;height:100vh;overflow-y:auto}.logo{display:flex;align-items:center;gap:1rem;padding:0 2rem;margin-bottom:3rem}.logo i{font-size:2rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.logo h1{font-size:1.5rem}nav{display:flex;flex-direction:column;gap:.5rem;padding:0 1rem}.nav-item{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;color:rgba(255,255,255,.7);text-decoration:none;border-radius:12px;transition:all .3s;cursor:pointer}.nav-item:hover{background:rgba(255,255,255,.05);color:#fff}.nav-item.active{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.badge{margin-left:auto;background:rgba(255,255,255,.2);padding:.25rem .75rem;border-radius:20px;font-size:.75rem}main{flex:1;margin-left:280px;padding:2rem;overflow-y:auto}.page{display:none}.page.active{display:block;animation:fadeIn .3s}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}h2{font-size:2.5rem;margin-bottom:2rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:3rem}.stat{background:rgba(17,24,39,.8);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;display:flex;gap:1.5rem;transition:transform .3s}.stat:hover{transform:translateY(-5px)}.stat-icon{width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat h3{font-size:2rem}.stat p{color:rgba(255,255,255,.6);font-size:.9rem;margin:.25rem 0 .75rem}.progress{width:100%;height:6px;background:rgba(255,255,255,.1);border-radius:10px;overflow:hidden}.progress div{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .5s}.activity{background:rgba(17,24,39,.8);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem}.activity h3{margin-bottom:1.5rem}.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem}.card{background:rgba(17,24,39,.8);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;cursor:pointer;transition:transform .3s}.card:hover{transform:translateY(-5px)}.filters{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.filter{padding:.75rem 1.5rem;background:rgba(17,24,39,.8);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.7);border-radius:25px;cursor:pointer;transition:all .3s}.filter:hover{background:rgba(255,255,255,.05)}.filter.active{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:1000;overflow-y:auto}.modal.active{display:block}.modal-content{background:rgba(17,24,39,.95);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2rem;max-width:1200px;margin:2rem auto;position:relative}.close{position:absolute;right:1.5rem;top:1.5rem;font-size:2rem;color:rgba(255,255,255,.7);cursor:pointer;z-index:10}.close:hover{color:#fff}iframe{width:100%;height:500px;border-radius:12px;border:none;margin:1rem 0}textarea{width:100%;min-height:200px;padding:1rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:8px;color:#fff;font-family:monospace;resize:vertical;font-size:14px}.btn{padding:.75rem 2rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:transform .2s;margin-top:1rem;margin-right:1rem;color:#fff}.btn:hover{transform:scale(1.05)}.btn-success{background:linear-gradient(135deg,#43e97b,#38f9d7)}.btn-primary{background:linear-gradient(135deg,#667eea,#764ba2)}.module-list{margin-top:2rem}.module-item{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:1.5rem;margin-bottom:1rem}.module-header{display:flex;justify-content:space-between;align-items:center}.lesson-content{margin-top:2rem;padding:2rem;background:rgba(0,0,0,.3);border-radius:12px}.challenge-section{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:1.5rem;margin:1.5rem 0}.challenge-section h3{color:#667eea;margin-bottom:1rem}.info-box{background:rgba(102,126,234,.1);border-left:4px solid #667eea;padding:1rem;border-radius:8px;margin:1rem 0}.warning-box{background:rgba(250,208,44,.1);border-left:4px solid #fad02c;padding:1rem;border-radius:8px;margin:1rem 0}.example-box{background:rgba(67,233,123,.1);border-left:4px solid #43e97b;padding:1rem;border-radius:8px;margin:1rem 0;font-family:monospace;white-space:pre-wrap}.test-case{padding:1rem;margin:.5rem 0;background:rgba(255,255,255,.05);border-radius:8px;border-left:3px solid rgba(255,255,255,.2)}.code-output{background:rgba(0,0,0,.5);padding:1rem;border-radius:8px;margin-top:1rem;font-family:monospace;white-space:pre-wrap;min-height:100px}
</style>
</head>
<body>
<div class="app">
<aside class="sidebar">
<div class="logo"><i class="fas fa-graduation-cap"></i><h1>TechMastery</h1></div>
<nav id="mainNav">
<a class="nav-item active" data-page="dashboard"><i class="fas fa-chart-line"></i><span>Dashboard</span></a>
<a class="nav-item" data-page="courses"><i class="fas fa-book-open"></i><span>Courses</span><span class="badge">3</span></a>
<a class="nav-item" data-page="books"><i class="fas fa-book"></i><span>Books</span><span class="badge">20</span></a>
<a class="nav-item" data-page="videos"><i class="fas fa-video"></i><span>Videos</span><span class="badge">10</span></a>
<a class="nav-item" data-page="challenges"><i class="fas fa-code"></i><span>Challenges</span><span class="badge">5</span></a>
</nav>
</aside>
<main>
<div id="dashboard" class="page active">
<h2>üìä Dashboard</h2>
<div class="stats">
<div class="stat"><div class="stat-icon" style="background:linear-gradient(135deg,#667eea,#764ba2)"><i class="fas fa-book"></i></div><div><h3 id="booksRead">0</h3><p>Books Read</p><div class="progress"><div id="booksProgress"></div></div></div></div>
<div class="stat"><div class="stat-icon" style="background:linear-gradient(135deg,#f093fb,#f5576c)"><i class="fas fa-video"></i></div><div><h3 id="videosWatched">0</h3><p>Videos Watched</p><div class="progress"><div id="videosProgress"></div></div></div></div>
<div class="stat"><div class="stat-icon" style="background:linear-gradient(135deg,#4facfe,#00f2fe)"><i class="fas fa-code"></i></div><div><h3 id="challengesSolved">0</h3><p>Challenges Solved</p><div class="progress"><div id="challengesProgress"></div></div></div></div>
<div class="stat"><div class="stat-icon" style="background:linear-gradient(135deg,#43e97b,#38f9d7)"><i class="fas fa-trophy"></i></div><div><h3 id="coursesCompleted">0</h3><p>Courses Completed</p><div class="progress"><div id="coursesProgress"></div></div></div></div>
</div>
<div class="activity"><h3>Recent Activity</h3><div id="activityList"></div></div>
</div>
<div id="courses" class="page"><h2>üìö Courses</h2><p style="color:rgba(255,255,255,.7);margin-bottom:2rem">Complete professional courses with 30-40 lessons each</p><div id="coursesList" class="grid"></div></div>
<div id="books" class="page"><h2>üìö Books</h2><div id="booksList" class="grid"></div></div>
<div id="videos" class="page"><h2>üé• Videos</h2><div class="filters" id="videoFilters"></div><div id="videosList" class="grid"></div></div>
<div id="challenges" class="page"><h2>üíª Challenges</h2><div class="filters" id="challengeFilters"></div><div id="challengesList" class="grid"></div></div>
</main>
</div>
<div id="modal" class="modal"><div class="modal-content"><span class="close" id="closeModal">&times;</span><div id="modalBody"></div></div></div>
<script>
console.log('Script loading...');

let state={booksRead:[],videosWatched:[],challengesSolved:[],coursesProgress:{},bookProgress:{},activity:[]};

const courses=[{id:1,title:"Complete Web Development",desc:"HTML, CSS, JavaScript, React, Node.js",duration:"50 hours",img:"https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800",level:"Beginner",students:"125K",rating:"4.8",modules:[{id:1,title:"HTML & CSS",duration:"10h",lessons:[{id:1,title:"HTML Basics",type:"video",content:"dQw4w9WgXcQ",duration:"20min"},{id:2,title:"CSS Styling",type:"text",content:"CSS styles HTML elements.\n\nBasic syntax:\nselector { property: value; }\n\nCommon properties:\n- color: Text color\n- background: Background\n- padding: Inside spacing\n- margin: Outside spacing",duration:"25min"}]},{id:2,title:"JavaScript",duration:"15h",lessons:[{id:3,title:"JS Intro",type:"video",content:"dQw4w9WgXcQ",duration:"30min"},{id:4,title:"Variables",type:"text",content:"Variables store data.\n\nlet name = 'John';\nconst age = 30;\n\nData types:\n- String\n- Number\n- Boolean\n- Array\n- Object",duration:"20min"}]}]},{id:2,title:"Python Programming",desc:"Python from basics to advanced",duration:"45 hours",img:"https://images.unsplash.com/photo-1526379095098-d400fd0bf935?w=800",level:"Beginner",students:"98K",rating:"4.9",modules:[{id:1,title:"Python Basics",duration:"12h",lessons:[{id:1,title:"Python Intro",type:"video",content:"dQw4w9WgXcQ",duration:"25min"},{id:2,title:"Variables",type:"text",content:"Python variables:\n\nname = 'John'\nage = 30\n\nData types:\n- str: 'text'\n- int: 42\n- float: 3.14\n- list: [1,2,3]\n- dict: {'key':'value'}",duration:"30min"}]}]},{id:3,title:"Data Science",desc:"NumPy, Pandas, ML",duration:"40 hours",img:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800",level:"Intermediate",students:"76K",rating:"4.7",modules:[{id:1,title:"NumPy",duration:"8h",lessons:[{id:1,title:"NumPy Intro",type:"video",content:"dQw4w9WgXcQ",duration:"20min"}]}]}];

const books=[{id:1,title:'Clean Code',author:'Robert Martin',pages:464,icon:'üìò',chapters:['Meaningful Names','Functions','Comments']},{id:2,title:'Pragmatic Programmer',author:'Andrew Hunt',pages:352,icon:'üìó',chapters:['Philosophy','Approach','Tools']},{id:3,title:'Design Patterns',author:'Gang of Four',pages:416,icon:'üìï',chapters:['Introduction','Creational','Structural']},{id:4,title:"You Don't Know JS",author:'Kyle Simpson',pages:278,icon:'üìô',chapters:['Programming','JavaScript','Scope']},{id:5,title:'Eloquent JavaScript',author:'Marijn Haverbeke',pages:472,icon:'üìò',chapters:['Values','Program Structure','Functions']}];

const videos=[{id:1,title:'JavaScript Course',cat:'programming',dur:'3:45:20',vid:'PkZNo7MFNFg'},{id:2,title:'React Tutorial',cat:'web',dur:'2:30:15',vid:'SqcY0GlETPk'},{id:3,title:'Python Course',cat:'programming',dur:'4:26:52',vid:'rfscVS0vtbw'},{id:4,title:'Machine Learning',cat:'ai',dur:'11:00:00',vid:'PPLop4L2eGk'},{id:5,title:'Data Structures',cat:'programming',dur:'9:18:36',vid:'RBSGKlAvoiM'},{id:6,title:'Node.js',cat:'web',dur:'8:16:48',vid:'Oe421EPjeBE'},{id:7,title:'Deep Learning',cat:'ai',dur:'5:30:00',vid:'CS4cs9xVecg'},{id:8,title:'SQL Tutorial',cat:'programming',dur:'4:20:23',vid:'HXV3zeQKqGY'},{id:9,title:'Git & GitHub',cat:'programming',dur:'1:08:41',vid:'RGOj5yH7evk'},{id:10,title:'Docker',cat:'web',dur:'3:10:23',vid:'fqMOX6JJhGo'}];

const challenges=[{id:1,title:'Two Sum',diff:'easy',type:'Algorithm',language:'JavaScript',desc:'Find two numbers that add up to target',fullDesc:'Given array and target, return indices of two numbers that add up to target.',pts:10,examples:[{input:'[2,7,11,15], 9',output:'[0,1]',explanation:'2 + 7 = 9'}],constraints:['Array length >= 2'],hints:['Use hash map'],template:'function twoSum(nums, target) {\n  // Your code\n}',tests:[{input:'twoSum([2,7,11,15], 9)',expected:'[0,1]'}],solution:'function twoSum(nums, target) {\n  const map = new Map();\n  for (let i = 0; i < nums.length; i++) {\n    const complement = target - nums[i];\n    if (map.has(complement)) {\n      return [map.get(complement), i];\n    }\n    map.set(nums[i], i);\n  }\n  return [];\n}'},{id:2,title:'Palindrome',diff:'easy',type:'String',language:'JavaScript',desc:'Check if string is palindrome',fullDesc:'Return true if string reads same forwards and backwards.',pts:10,examples:[{input:'"racecar"',output:'true',explanation:'Same both ways'}],constraints:['Ignore spaces'],hints:['Compare with reverse'],template:'function isPalindrome(str) {\n  // Your code\n}',tests:[{input:'isPalindrome("racecar")',expected:'true'}],solution:'function isPalindrome(str) {\n  const cleaned = str.toLowerCase().replace(/[^a-z0-9]/g, "");\n  return cleaned === cleaned.split("").reverse().join("");\n}'},{id:3,title:'FizzBuzz',diff:'easy',type:'Logic',language:'JavaScript',desc:'Classic FizzBuzz',fullDesc:'For multiples of 3 print Fizz, 5 print Buzz, both print FizzBuzz.',pts:10,examples:[{input:'15',output:'"FizzBuzz"',explanation:'Divisible by both'}],constraints:['1 to 100'],hints:['Check 15 first'],template:'function fizzBuzz(n) {\n  // Your code\n}',tests:[{input:'fizzBuzz(15)',expected:'"FizzBuzz"'}],solution:'function fizzBuzz(n) {\n  if (n % 15 === 0) return "FizzBuzz";\n  if (n % 3 === 0) return "Fizz";\n  if (n % 5 === 0) return "Buzz";\n  return n.toString();\n}'},{id:4,title:'Binary Search',diff:'medium',type:'Algorithm',language:'JavaScript',desc:'Search in sorted array',fullDesc:'Find target in sorted array using binary search.',pts:20,examples:[{input:'[1,2,3,4,5], 3',output:'2',explanation:'Found at index 2'}],constraints:['Array is sorted'],hints:['Use two pointers'],template:'function binarySearch(arr, target) {\n  // Your code\n}',tests:[{input:'binarySearch([1,2,3,4,5], 3)',expected:'2'}],solution:'function binarySearch(arr, target) {\n  let left = 0, right = arr.length - 1;\n  while (left <= right) {\n    const mid = Math.floor((left + right) / 2);\n    if (arr[mid] === target) return mid;\n    if (arr[mid] < target) left = mid + 1;\n    else right = mid - 1;\n  }\n  return -1;\n}'},{id:5,title:'Reverse String',diff:'easy',type:'String',language:'JavaScript',desc:'Reverse a string',fullDesc:'Reverse the input string without using built-in reverse.',pts:10,examples:[{input:'"hello"',output:'"olleh"',explanation:'Reversed'}],constraints:['No built-in reverse'],hints:['Loop backwards'],template:'function reverseString(str) {\n  // Your code\n}',tests:[{input:'reverseString("hello")',expected:'"olleh"'}],solution:'function reverseString(str) {\n  let result = "";\n  for (let i = str.length - 1; i >= 0; i--) {\n    result += str[i];\n  }\n  return result;\n}'}];

function load(){try{const s=localStorage.getItem('techMastery');if(s)state=JSON.parse(s)}catch(e){console.error('Load error:',e)}}
function save(){try{localStorage.setItem('techMastery',JSON.stringify(state))}catch(e){console.error('Save error:',e)}}
function addActivity(t,txt,icon,grad){state.activity.unshift({type:t,text:txt,icon,grad,time:new Date().toISOString()});if(state.activity.length>10)state.activity.pop();save();updateDash()}
function updateDash(){document.getElementById('booksRead').textContent=state.booksRead.length;document.getElementById('videosWatched').textContent=state.videosWatched.length;document.getElementById('challengesSolved').textContent=state.challengesSolved.length;const c=Object.values(state.coursesProgress).filter(p=>p===100).length;document.getElementById('coursesCompleted').textContent=c;document.getElementById('booksProgress').style.width=`${state.booksRead.length/20*100}%`;document.getElementById('videosProgress').style.width=`${state.videosWatched.length/100*100}%`;document.getElementById('challengesProgress').style.width=`${state.challengesSolved.length/500*100}%`;document.getElementById('coursesProgress').style.width=`${c/3*100}%`;const al=document.getElementById('activityList');al.innerHTML=state.activity.length?state.activity.map(a=>`<div style="display:flex;gap:1rem;padding:1rem;background:rgba(255,255,255,.05);border-radius:12px;margin-bottom:1rem"><div style="width:40px;height:40px;border-radius:8px;background:${a.grad};display:flex;align-items:center;justify-content:center"><i class="fas fa-${a.icon}"></i></div><div><h4>${a.text}</h4><p style="color:rgba(255,255,255,.5);font-size:.85rem">${new Date(a.time).toLocaleString()}</p></div></div>`).join(''):'<p style="text-align:center;color:rgba(255,255,255,.5);padding:2rem">No activity yet. Start learning!</p>'}

function renderCourses(){const html=courses.map(c=>{const progress=state.coursesProgress[c.id]||{completed:0,total:c.modules.reduce((sum,m)=>sum+m.lessons.length,0)};const pct=Math.round((progress.completed/progress.total)*100)||0;return`<div class="card" data-course="${c.id}"><img src="${c.img}" style="width:100%;height:200px;object-fit:cover;border-radius:12px;margin-bottom:1rem"><h3>${c.title}</h3><p style="color:rgba(255,255,255,.7);margin:.5rem 0">${c.desc}</p><div style="display:flex;gap:1rem;margin:1rem 0;flex-wrap:wrap;font-size:.85rem;color:rgba(255,255,255,.6)"><span><i class="fas fa-clock"></i> ${c.duration}</span><span><i class="fas fa-signal"></i> ${c.level}</span><span><i class="fas fa-users"></i> ${c.students}</span><span><i class="fas fa-star"></i> ${c.rating}</span></div><p style="font-size:.85rem;color:rgba(255,255,255,.6)"><i class="fas fa-book"></i> ${c.modules.length} modules ‚Ä¢ ${progress.total} lessons</p><div style="margin-top:1rem"><p style="font-size:.85rem;margin-bottom:.5rem">Progress: ${progress.completed}/${progress.total} (${pct}%)</p><div class="progress"><div style="width:${pct}%"></div></div></div></div>`}).join('');document.getElementById('coursesList').innerHTML=html;document.querySelectorAll('[data-course]').forEach(el=>{el.addEventListener('click',()=>openCourse(parseInt(el.dataset.course)))})}

function openCourse(cid){console.log('Opening course:',cid);const c=courses.find(x=>x.id===cid);if(!c){console.error('Course not found:',cid);return}if(!state.coursesProgress[cid]){state.coursesProgress[cid]={completed:0,total:c.modules.reduce((sum,m)=>sum+m.lessons.length,0),lessons:{}}}const prog=state.coursesProgress[cid];const m=document.getElementById('modal');const b=document.getElementById('modalBody');b.innerHTML=`<h2>${c.title}</h2><p style="margin:1rem 0;color:rgba(255,255,255,.7)">${c.desc}</p><div style="display:flex;gap:1rem;margin:1rem 0;flex-wrap:wrap"><span><i class="fas fa-clock"></i> ${c.duration}</span><span><i class="fas fa-signal"></i> ${c.level}</span><span><i class="fas fa-users"></i> ${c.students}</span><span><i class="fas fa-star"></i> ${c.rating}</span></div><p>Progress: ${prog.completed}/${prog.total} lessons</p><div class="progress" style="margin:1rem 0"><div style="width:${Math.round((prog.completed/prog.total)*100)}%"></div></div><div class="module-list">${c.modules.map(mod=>`<div class="module-item"><div class="module-header"><h3><i class="fas fa-folder"></i> ${mod.title}</h3><span>${mod.lessons.filter(l=>prog.lessons[l.id]).length}/${mod.lessons.length} ‚Ä¢ ${mod.duration}</span></div><div style="margin-top:1rem">${mod.lessons.map(les=>`<div class="lesson-link" data-course="${cid}" data-module="${mod.id}" data-lesson="${les.id}" style="padding:.75rem;margin:.5rem 0;background:rgba(255,255,255,.03);border-radius:8px;cursor:pointer;border-left:3px solid ${prog.lessons[les.id]?'#43e97b':'rgba(255,255,255,.2)'}" onmouseover="this.style.background='rgba(255,255,255,.08)'" onmouseout="this.style.background='rgba(255,255,255,.03)'"><i class="fas fa-${prog.lessons[les.id]?'check-circle':'circle'}"></i> ${les.title} <span style="float:right;color:rgba(255,255,255,.5);font-size:.85rem">${les.duration}</span></div>`).join('')}</div></div>`).join('')}</div>`;document.querySelectorAll('.lesson-link').forEach(el=>{el.addEventListener('click',()=>openLesson(parseInt(el.dataset.course),parseInt(el.dataset.module),parseInt(el.dataset.lesson)))});m.classList.add('active')}

function openLesson(cid,mid,lid){console.log('Opening lesson:',cid,mid,lid);const c=courses.find(x=>x.id===cid);const mod=c.modules.find(x=>x.id===mid);const les=mod.lessons.find(x=>x.id===lid);const b=document.getElementById('modalBody');let content='';if(les.type==='video'){content=`<h2>${les.title}</h2><p style="color:rgba(255,255,255,.6);margin:1rem 0"><i class="fas fa-clock"></i> ${les.duration}</p><iframe src="https://www.youtube.com/embed/${les.content}?modestbranding=1&rel=0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" allowfullscreen></iframe>`}else{content=`<h2>${les.title}</h2><p style="color:rgba(255,255,255,.6);margin:1rem 0"><i class="fas fa-clock"></i> ${les.duration}</p><div class="lesson-content"><pre style="white-space:pre-wrap;font-family:inherit;line-height:1.8">${les.content}</pre></div>`}content+=`<button class="btn btn-success" onclick="completeLesson(${cid},${mid},${lid})"><i class="fas fa-check"></i> Mark Complete</button><button class="btn btn-primary" onclick="openCourse(${cid})"><i class="fas fa-arrow-left"></i> Back</button>`;b.innerHTML=content}

function completeLesson(cid,mid,lid){if(!state.coursesProgress[cid].lessons[lid]){state.coursesProgress[cid].lessons[lid]=true;state.coursesProgress[cid].completed++;const c=courses.find(x=>x.id===cid);const mod=c.modules.find(x=>x.id===mid);const les=mod.lessons.find(x=>x.id===lid);addActivity('course',`Completed: ${les.title}`,'check','linear-gradient(135deg,#43e97b,#38f9d7)');save()}const c=courses.find(x=>x.id===cid);const mod=c.modules.find(x=>x.id===mid);const nextLesson=mod.lessons.find(l=>l.id===lid+1);if(nextLesson){openLesson(cid,mid,nextLesson.id)}else{openCourse(cid)}renderCourses();updateDash()}

function renderBooks(){const html=books.map(b=>{const p=state.bookProgress[b.id]||{current:0,total:b.chapters.length};const pct=Math.round((p.current/p.total)*100);const done=state.booksRead.includes(b.id);return`<div class="card" data-book="${b.id}"><div style="font-size:3rem;margin-bottom:1rem">${b.icon}</div><h3>${b.title}</h3><p style="color:rgba(255,255,255,.6);margin:.5rem 0">${b.author}</p><p style="font-size:.85rem;color:rgba(255,255,255,.5)">${b.pages} pages ‚Ä¢ ${b.chapters.length} chapters</p><div style="margin-top:1rem"><p style="font-size:.85rem;margin-bottom:.5rem">Chapter ${p.current}/${p.total} (${pct}%)</p><div class="progress"><div style="width:${pct}%"></div></div></div>${done?'<p style="color:#43e97b;margin-top:.5rem"><i class="fas fa-check"></i> Completed</p>':''}</div>`}).join('');document.getElementById('booksList').innerHTML=html;document.querySelectorAll('[data-book]').forEach(el=>{el.addEventListener('click',()=>openBook(parseInt(el.dataset.book)))})}

function openBook(id){console.log('Opening book:',id);const b=books.find(x=>x.id===id);if(!state.bookProgress[id]){state.bookProgress[id]={current:0,total:b.chapters.length}}const p=state.bookProgress[id];const m=document.getElementById('modal');const bd=document.getElementById('modalBody');bd.innerHTML=`<h2>${b.icon} ${b.title}</h2><p style="margin:1rem 0;color:rgba(255,255,255,.7)">by ${b.author} ‚Ä¢ ${b.pages} pages</p><p>Chapter ${p.current}/${p.total}</p><div class="progress" style="margin:1rem 0"><div style="width:${Math.round((p.current/p.total)*100)}%"></div></div><h3 style="margin:2rem 0 1rem">Chapters:</h3>${b.chapters.map((ch,i)=>`<div style="padding:1rem;margin:.5rem 0;background:rgba(255,255,255,.05);border-radius:8px;border-left:3px solid ${i<p.current?'#43e97b':i===p.current?'#667eea':'rgba(255,255,255,.2)'}"><strong>Chapter ${i+1}:</strong> ${ch} ${i<p.current?'<i class="fas fa-check-circle" style="color:#43e97b;float:right"></i>':i===p.current?'<span style="color:#667eea;float:right">Current</span>':''}</div>`).join('')}<iframe src="https://www.africau.edu/images/default/sample.pdf"></iframe><button class="btn btn-success" onclick="nextChapter(${id})">Complete Chapter</button>`;m.classList.add('active')}

function nextChapter(id){const b=books.find(x=>x.id===id);if(state.bookProgress[id].current<state.bookProgress[id].total){state.bookProgress[id].current++;addActivity('book',`Read chapter in ${b.title}`,'book','linear-gradient(135deg,#667eea,#764ba2)');if(state.bookProgress[id].current===state.bookProgress[id].total&&!state.booksRead.includes(id)){state.booksRead.push(id);addActivity('book',`Finished: ${b.title}`,'trophy','linear-gradient(135deg,#43e97b,#38f9d7)')}save();openBook(id);renderBooks();updateDash()}}

let vFilter='all';function renderVideos(f='all'){vFilter=f;const filtered=f==='all'?videos:videos.filter(v=>v.cat===f);const html=filtered.map(v=>{const watched=state.videosWatched.includes(v.id);return`<div class="card" data-video="${v.id}"><img src="https://img.youtube.com/vi/${v.vid}/maxresdefault.jpg" style="width:100%;height:180px;object-fit:cover;border-radius:12px;margin-bottom:1rem"><h3 style="font-size:1.1rem">${v.title}</h3><p style="color:rgba(255,255,255,.6);font-size:.85rem"><i class="fas fa-clock"></i> ${v.dur}</p>${watched?'<p style="color:#43e97b;margin-top:.5rem"><i class="fas fa-check"></i> Watched</p>':''}</div>`}).join('');document.getElementById('videosList').innerHTML=html;document.querySelectorAll('[data-video]').forEach(el=>{el.addEventListener('click',()=>openVideo(parseInt(el.dataset.video)))});const filters=`<button class="filter ${f==='all'?'active':''}" data-cat="all">All</button><button class="filter ${f==='programming'?'active':''}" data-cat="programming">Programming</button><button class="filter ${f==='ai'?'active':''}" data-cat="ai">AI/ML</button><button class="filter ${f==='web'?'active':''}" data-cat="web">Web Dev</button>`;document.getElementById('videoFilters').innerHTML=filters;document.querySelectorAll('#videoFilters .filter').forEach(b=>{b.addEventListener('click',()=>renderVideos(b.dataset.cat))})}

function openVideo(id){console.log('Opening video:',id);const v=videos.find(x=>x.id===id);const m=document.getElementById('modal');const b=document.getElementById('modalBody');b.innerHTML=`<h2>üé• ${v.title}</h2><p style="margin:1rem 0;color:rgba(255,255,255,.7)"><i class="fas fa-clock"></i> ${v.dur}</p><iframe src="https://www.youtube.com/embed/${v.vid}?modestbranding=1&rel=0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" allowfullscreen></iframe><button class="btn btn-success" onclick="watchVideo(${id})">Mark as Watched</button>`;m.classList.add('active')}

function watchVideo(id){if(!state.videosWatched.includes(id)){state.videosWatched.push(id);const v=videos.find(x=>x.id===id);addActivity('video',`Watched: ${v.title}`,'video','linear-gradient(135deg,#f093fb,#f5576c)')}document.getElementById('modal').classList.remove('active');renderVideos(vFilter);updateDash();save()}

let cFilter='all';function renderChallenges(f='all'){cFilter=f;const filtered=f==='all'?challenges:challenges.filter(c=>c.diff===f);const html=filtered.map(c=>{const solved=state.challengesSolved.includes(c.id);return`<div class="card" data-challenge="${c.id}"><div style="display:flex;justify-content:space-between;margin-bottom:1rem"><span style="padding:.25rem .75rem;border-radius:20px;font-size:.75rem;background:rgba(${c.diff==='easy'?'67,233,123':'250,208,44'},.2);color:${c.diff==='easy'?'#43e97b':'#fad02c'}">${c.diff.toUpperCase()}</span>${solved?'<i class="fas fa-check-circle" style="color:#43e97b"></i>':''}</div><h3>${c.title}</h3><p style="color:rgba(255,255,255,.6);margin:.5rem 0">${c.desc}</p><div style="margin-top:1rem;display:flex;gap:1rem;flex-wrap:wrap"><span style="font-size:.85rem;color:rgba(255,255,255,.5)"><i class="fas fa-tag"></i> ${c.type}</span><span style="font-size:.85rem;color:rgba(255,255,255,.5)"><i class="fas fa-code"></i> ${c.language}</span><span style="font-size:.85rem;color:rgba(255,255,255,.5)"><i class="fas fa-star"></i> ${c.pts} pts</span></div></div>`}).join('');document.getElementById('challengesList').innerHTML=html;document.querySelectorAll('[data-challenge]').forEach(el=>{el.addEventListener('click',()=>openChallenge(parseInt(el.dataset.challenge)))});const filters=`<button class="filter ${f==='all'?'active':''}" data-diff="all">All</button><button class="filter ${f==='easy'?'active':''}" data-diff="easy">Easy</button><button class="filter ${f==='medium'?'active':''}" data-diff="medium">Medium</button><button class="filter ${f==='hard'?'active':''}" data-diff="hard">Hard</button>`;document.getElementById('challengeFilters').innerHTML=filters;document.querySelectorAll('#challengeFilters .filter').forEach(b=>{b.addEventListener('click',()=>renderChallenges(b.dataset.diff))})}

function openChallenge(id){console.log('Opening challenge:',id);const c=challenges.find(x=>x.id===id);const m=document.getElementById('modal');const b=document.getElementById('modalBody');let content=`<h2>üíª ${c.title}</h2><div style="display:flex;gap:1rem;margin:1rem 0;flex-wrap:wrap"><span style="padding:.5rem 1rem;border-radius:20px;background:rgba(${c.diff==='easy'?'67,233,123':'250,208,44'},.2);color:${c.diff==='easy'?'#43e97b':'#fad02c'}">${c.diff.toUpperCase()}</span><span style="padding:.5rem 1rem;border-radius:20px;background:rgba(255,255,255,.1)"><i class="fas fa-tag"></i> ${c.type}</span><span style="padding:.5rem 1rem;border-radius:20px;background:rgba(255,255,255,.1)"><i class="fas fa-code"></i> ${c.language}</span><span style="padding:.5rem 1rem;border-radius:20px;background:rgba(255,255,255,.1)"><i class="fas fa-star"></i> ${c.pts} points</span></div><div class="challenge-section"><h3><i class="fas fa-info-circle"></i> Problem</h3><p style="line-height:1.8;white-space:pre-wrap">${c.fullDesc}</p></div><div class="challenge-section"><h3><i class="fas fa-lightbulb"></i> Examples</h3>${c.examples.map((ex,i)=>`<div class="example-box"><strong>Example ${i+1}:</strong>\n\nInput: ${ex.input}\nOutput: ${ex.output}\n\nExplanation: ${ex.explanation}</div>`).join('')}</div><div class="challenge-section"><h3><i class="fas fa-exclamation-triangle"></i> Constraints</h3><ul style="margin-left:1.5rem;line-height:2">${c.constraints.map(con=>`<li>${con}</li>`).join('')}</ul></div><div class="challenge-section"><h3><i class="fas fa-question-circle"></i> Hints</h3>${c.hints.map((hint,i)=>`<div class="info-box"><strong>Hint ${i+1}:</strong> ${hint}</div>`).join('')}</div><div class="challenge-section"><h3><i class="fas fa-keyboard"></i> Your Solution</h3><textarea id="codeInput" style="min-height:300px">${c.template}</textarea><div class="code-output" id="output">Click "Run Tests"...</div></div><div class="challenge-section"><h3><i class="fas fa-check-circle"></i> Test Cases</h3>${c.tests.map((t,i)=>`<div class="test-case"><strong>Test ${i+1}:</strong><br>Input: ${t.input}<br>Expected: ${t.expected}</div>`).join('')}</div><button class="btn btn-primary" onclick="runCode(${id})"><i class="fas fa-play"></i> Run Tests</button><button class="btn btn-success" onclick="submitChallenge(${id})"><i class="fas fa-check"></i> Submit</button><button class="btn" style="background:rgba(255,255,255,.1)" onclick="showSolution(${id})"><i class="fas fa-eye"></i> Solution</button>`;b.innerHTML=content;m.classList.add('active')}

function runCode(id){const c=challenges.find(x=>x.id===id);const code=document.getElementById('codeInput').value;const output=document.getElementById('output');let results='';let passed=0;try{eval(code);c.tests.forEach((t,i)=>{try{const result=eval(t.input);const testPassed=JSON.stringify(result)===t.expected;if(testPassed)passed++;results+=`Test ${i+1}: ${testPassed?'‚úì PASSED':'‚úó FAILED'}\nInput: ${t.input}\nExpected: ${t.expected}\nGot: ${JSON.stringify(result)}\n\n`}catch(e){results+=`Test ${i+1}: ‚úó ERROR\n${e.message}\n\n`}});results=`Results: ${passed}/${c.tests.length} passed\n\n${results}`;output.textContent=results;if(passed===c.tests.length){output.textContent+='\nüéâ All tests passed!'}}catch(e){output.textContent=`Error:\n${e.message}`}}

function submitChallenge(id){const code=document.getElementById('codeInput').value;if(!code||code.trim()===challenges.find(x=>x.id===id).template.trim()){alert('Please write your solution!');return}if(!state.challengesSolved.includes(id)){state.challengesSolved.push(id);const c=challenges.find(x=>x.id===id);addActivity('challenge',`Solved: ${c.title}`,'code','linear-gradient(135deg,#4facfe,#00f2fe)');save()}document.getElementById('modal').classList.remove('active');renderChallenges(cFilter);updateDash();alert('üéâ Challenge completed! +'+challenges.find(x=>x.id===id).pts+' points!')}

function showSolution(id){const c=challenges.find(x=>x.id===id);const m=document.getElementById('modal');const b=document.getElementById('modalBody');b.innerHTML=`<h2>üí° Solution: ${c.title}</h2><div class="warning-box"><strong>‚ö†Ô∏è Spoiler Alert!</strong><br>Study and understand the solution.</div><div class="challenge-section"><h3>Solution:</h3><pre style="background:rgba(0,0,0,.5);padding:1.5rem;border-radius:8px;overflow-x:auto;white-space:pre-wrap;font-family:monospace;line-height:1.6">${c.solution}</pre></div><button class="btn btn-primary" onclick="openChallenge(${id})">Back to Challenge</button>`;m.classList.add('active')}

// Navigation
document.querySelectorAll('#mainNav .nav-item').forEach(i=>{i.addEventListener('click',e=>{e.preventDefault();const p=i.dataset.page;console.log('Navigating to:',p);document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));i.classList.add('active');document.querySelectorAll('.page').forEach(pg=>pg.classList.remove('active'));document.getElementById(p).classList.add('active')})});

// Modal close
document.getElementById('closeModal').addEventListener('click',()=>{document.getElementById('modal').classList.remove('active')});
window.addEventListener('click',e=>{if(e.target.id==='modal')e.target.classList.remove('active')});

// Initialize
console.log('Initializing...');
load();
updateDash();
renderCourses();
renderBooks();
renderVideos();
renderChallenges();
console.log('Ready!');
</script>
</body>
</html>